import{d as ie,y as ne,J as ae,g as de,i as M,j as ue,B as re,K as pe,C as ce,A as ve,r as me,o as u,b as r,e as p,h as y,f as o,t as c,u as i,H as _e,w as C,F as h,E as I,l as b,S as T,M as L,D as A,I as N,R as F,_ as fe}from"./index-DzSmKHMA.js";import{g as Ce,m as H}from"./ModulePage.vue_vue_type_script_setup_true_lang-UzLw0JoU.js";import{M as w,a as he}from"./MultiConfigGUI-CwkwOIij.js";import{c as Se}from"./compendiumTechList-CpicnKou.js";import{b as Me}from"./byTypes-DiOuyN-I.js";import{g as ye}from"./globals-D0lvPSen.js";import{s as z}from"./capital_ships-BOrq68-Q.js";import{T as K}from"./TechList-bByxjTIB.js";import{N as ge}from"./NumberPicker-COl0eLpW.js";import{o as Ie}from"./Data-CHLXClCh.js";import"./Page-_A5k4SLV.js";import"./spacebuildings-CVaBZ2bu.js";import"./sec2str-BekYjVf3.js";const Te={class:"container"},Le={class:"topic"},Ee={class:"buttons"},De={key:0,class:"ship-list"},ke=["onClick"],be={class:"icon"},Ne={class:"body"},Oe={class:"modules"},Ue={key:0,class:"level"},Be={class:"create-ship-list"},$e=["onClick"],Ae=["onUpdate:modelValue"],He=["value"],we={class:"edit-ship"},ze={class:"modal-module"},Pe={class:"title"},Ge={class:"level-picker"},je={class:"module-levels"},Ye={class:"select"},Re={class:"name"},Ve=["value"],Fe=["value"],Ke={disabled:""},qe=["value"],xe={disabled:""},We=["value"],Je={name:"ShipBuild"};var q=(m=>(m[m.NONE=null]="NONE",m.EDIT="Edit",m.MODULES_CALC="ModulesCalc",m.HS_COMPENDIUM="HSCompendium",m))(q||{});const Ze=ie({...Je,setup(m){const x="shipBuild",W="modulesCalc",_={levels:{Transport:1,Miner:1,Battleship:1},ships:[]},g={Battleship:z.Battleship,Transport:z.Transport,Miner:z.Miner},{MaxModuleLevel:J}=ye,Z=Ie(H,{map:([l,e])=>[l,Ce(e)]}),P=ne(),G=ae(),{t:Q}=de(),{data:X,levelMap:j}=Se(),s=new w(x,_),Y=new w(W,{}),R=Q("SHIP_BUILD"),V=Object.keys(g),E=M(!1),O=M(!1),D=M(!1),U=M(!1),B=M(!1),S=M(P.state.userSettings.shipBuildSync),a=ue({data:{hideModulesTypes:[],removeShip:()=>{},ship:{slots:[]},module:{Name:"",Icon:"",TID:""},updateModule:()=>{}}});if(S.value.provider!="HSCompendium"&&$(),G.currentRoute.value.query.d){const e={...w.parseUrl(G.currentRoute.value.query.d)};s.add(e,{temporary:!0})}re(async()=>{await pe(),$()}),ce(j,l=>{S.value.provider=="HSCompendium"&&(s.selectedConfig.levels={...l})});function ee(l){s.selectedConfig.ships.push({meta:{type:l},slots:[]}),s.selectedConfig.ships.sort((e,d)=>V.indexOf(e.meta.type)-V.indexOf(d.meta.type)),s.save(),E.value=!1}function se(l){const e=s.selectedConfig.ships[l],{levels:d}=s.selectedConfig,t=[],{NewModuleSlots:n}=g[e.meta.type];typeof n=="string"?t.push(...Array(d[e.meta.type]).fill(n)):Array.isArray(n)&&t.push(...n.slice(0,d[e.meta.type]).flat()),e.slots.length||(e.slots=t),a.data.ship=e,a.data.hideModulesTypes=Me.artifact.filter(f=>!t.includes(f)),a.data.removeShip=()=>{s.selectedConfig.ships.splice(l,1),s.save(),D.value=!1},s.save(),D.value=!0}function te(l){return a.data.ship.slots.includes(l)}function le({SlotType:l,Name:e}){const d=a.data.ship.slots.indexOf(e);if(d!=-1)a.data.ship.slots[d]=l;else{const t=a.data.ship.slots.indexOf(l);t!=-1&&(a.data.ship.slots[t]=e)}s.save()}function oe(l){a.data.module=l,a.data.updateModule=e=>{s.selectedConfig.levels[l.Name]=e,s.save()},U.value=!0}function $(){var d,t,n,f,v,k;const{provider:l,index:e}=S.value;l=="ModulesCalc"&&(s.selectedConfig.levels={Transport:((t=(d=s==null?void 0:s.selectedConfig)==null?void 0:d.levels)==null?void 0:t.Transport)??_.levels.Transport,Miner:((f=(n=s==null?void 0:s.selectedConfig)==null?void 0:n.levels)==null?void 0:f.Miner)??_.levels.Miner,Battleship:((k=(v=s==null?void 0:s.selectedConfig)==null?void 0:v.levels)==null?void 0:k.Battleship)??_.levels.Battleship,...Y.store.configs[e].value.actually}),l=="HSCompendium"&&(s.selectedConfig.levels={...j.value}),l==null&&Object.keys(s.selectedConfig.levels).length!=Object.keys(_.levels).length&&(s.selectedConfig.levels={..._.levels}),P.commit(ve.SET_SHIP_BUILD_SYNC,S.value),s.save()}return(l,e)=>{const d=me("t");return u(),r("div",Te,[p(i(_e),null,{default:y(()=>[o("title",null,c(i(R)),1)]),_:1}),o("h1",Le,c(i(R)),1),o("div",Ee,[o("button",{class:"settings-btn",onClick:e[0]||(e[0]=t=>B.value=!0)}),C(o("button",{class:"button accent",onClick:e[1]||(e[1]=t=>E.value=!0)},null,512),[[d,"TID_PC_NEW_SHIP"]]),C(o("button",{class:"button accent",onClick:e[2]||(e[2]=t=>O.value=!0)},null,512),[[d,"TID_MODULE_LEVEL_HINT_TITLE"]])]),"levels"in i(s).selectedConfig&&Object.keys(i(s).selectedConfig.levels).length?(u(),r("ul",De,[(u(!0),r(h,null,I(i(s).selectedConfig.ships,({meta:{type:t},slots:n},f)=>(u(),r("li",{key:`${t}${f}`,class:"ship",onClick:v=>se(f)},[o("div",be,[p(N,{dir:"game/Ships",name:g[t].Model[i(s).selectedConfig.levels[t]-1]},null,8,["name"])]),o("div",Ne,[C(o("p",null,null,512),[[d,g[t].TID]]),o("ul",Oe,[(u(!0),r(h,null,I(n,(v,k)=>(u(),r("li",{key:`${v}${k}`},[v in i(H)?(u(),r(h,{key:0},[p(N,{dir:"game/Modules",name:i(H)[v].Icon},null,8,["name"]),i(s).selectedConfig.levels[v]?(u(),r("span",Ue,c(i(s).selectedConfig.levels[v]),1)):b("v-if",!0)],64)):b("v-if",!0)]))),128))])])],8,ke))),128))])):b("v-if",!0),p(L,{open:E.value,"onUpdate:open":e[4]||(e[4]=t=>E.value=t),title:l.$t("TID_PC_NEW_SHIP"),size:i(T).SMALL},{body:y(()=>[o("ul",Be,[(u(),r(h,null,I(g,t=>o("li",{key:t.Name,class:"ship"},[o("div",{class:"icon",onClick:n=>ee(t.Name)},[p(N,{dir:"game/Ships",name:t.Model[i(s).selectedConfig.levels[t.Name]-1]},null,8,["name"])],8,$e),o("div",{class:A(["select",{disable:l.$store.state.userSettings.shipBuildSync.provider=="HSCompendium"}])},[C(o("select",{"onUpdate:modelValue":n=>i(s).selectedConfig.levels[t.Name]=n,onChange:e[3]||(e[3]=(...n)=>i(s).save&&i(s).save(...n))},[(u(!0),r(h,null,I(t.BuildCost.length,n=>(u(),r("option",{key:n,value:n},c(n),9,He))),128))],40,Ae),[[F,i(s).selectedConfig.levels[t.Name]]])],2)])),64))])]),_:1},8,["open","title","size"]),p(L,{open:D.value,"onUpdate:open":e[6]||(e[6]=t=>D.value=t),title:l.$t("TID_CORP_DIALOG_EDIT"),size:i(T).LARGE},{body:y(()=>[o("div",we,[o("div",{class:A(["tech-list",a.data.hideModulesTypes])},[p(K,{"is-muted":te,"on-click":le})],2),C(o("button",{class:"button red",onClick:e[5]||(e[5]=(...t)=>a.data.removeShip&&a.data.removeShip(...t))},null,512),[[d,"TID_DISBAND_SHIP_BUTTON"]])])]),_:1},8,["open","title","size"]),p(L,{open:U.value,"onUpdate:open":e[7]||(e[7]=t=>U.value=t),title:l.$t("TID_CORP_DIALOG_EDIT"),size:i(T).SMALL},{body:y(()=>[o("div",ze,[o("div",Pe,[o("div",null,[o("h2",null,c(l.$t(a.data.module.TID)),1)]),p(N,{name:a.data.module.Icon,dir:"game/Modules"},null,8,["name"])]),o("div",Ge,[p(ge,{value:i(s).selectedConfig.levels[a.data.module.Name]||0,min:i(Z)[a.data.module.Name],max:i(J),"onUpdate:value":a.data.updateModule},null,8,["value","min","max","onUpdate:value"])])])]),_:1},8,["open","title","size"]),p(L,{open:O.value,"onUpdate:open":e[9]||(e[9]=t=>O.value=t),title:l.$t("TID_MODULE_LEVEL_HINT_TITLE"),size:i(T).LARGE},{body:y(()=>[o("div",je,[o("div",Ye,[C(o("p",Re,null,512),[[d,"SYNC"]]),C(o("select",{"onUpdate:modelValue":e[8]||(e[8]=t=>S.value=t),onChange:$},[o("option",{value:{provider:q.NONE}},c(l.$t("TID_PLAYER_INFO_CORP_NONE")),9,Ve),o("option",{value:{provider:"Edit"}},c(l.$t("TID_CORP_DIALOG_EDIT")),9,Fe),o("option",Ke,"--- "+c(l.$t("MODULES_CALC"))+" ---",1),(u(!0),r(h,null,I(i(Y).store.configs,(t,n)=>(u(),r("option",{key:n,value:{provider:"ModulesCalc",index:n}},c(t.name),9,qe))),128)),i(X)?(u(),r(h,{key:0},[o("option",xe,"--- "+c(l.$t("HS_COMPENDIUM"))+" ---",1),o("option",{value:{provider:"HSCompendium",index:0}}," 0 ",8,We)],64)):b("v-if",!0)],544),[[F,S.value]])]),o("div",{class:A(["tech-list",{disable:l.$store.state.userSettings.shipBuildSync.provider!="Edit"}])},[p(K,{"level-map":i(s).selectedConfig.levels,"on-click":oe},null,8,["level-map"])],2)])]),_:1},8,["open","title","size"]),p(L,{open:B.value,"onUpdate:open":[e[10]||(e[10]=t=>B.value=t),e[11]||(e[11]=()=>i(s).save())],title:l.$t("TID_SETTINGS_DLG_TITLE"),size:i(T).MEDIUM},{body:y(()=>[p(he,{"on-create-new":()=>i(s).add(_),instance:i(s)},null,8,["on-create-new","instance"])]),_:1},8,["open","title","size"])])}}}),ps=fe(Ze,[["__scopeId","data-v-8c2d22d8"],["__file","/home/runner/work/HadesSpace/HadesSpace/src/pages/ShipBuild.vue"]]);export{q as PROVIDERS,ps as default};
