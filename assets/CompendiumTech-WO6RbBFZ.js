import{d as q,g as F,i as O,j as C,S as D,a as _,k as K,r as X,o as Z,c as J,h as u,e as o,f as n,t as g,u as r,H as Q,l as W,w as k,m as y,M as N,n as Y,p as ee,q as x,s as I,I as h,v as ae,x as te,_ as ne}from"./index-DtFCpcks.js";import{c as se}from"./compendiumTechList-BBMI0AJd.js";import{s as oe}from"./sec2str-CqR_vxEK.js";import{m as E,g as le,t as ie}from"./ModulePage.vue_vue_type_script_setup_true_lang-HQAqrKuF.js";import{C as re}from"./CompendiumPage-BjhLhkbu.js";import{T as de}from"./TechList-Cz8oZc8W.js";import{N as ce}from"./NumberPicker-DU54sA0b.js";import{V as me}from"./Data-Djf6rtcE.js";import{g as pe}from"./globals-D0lvPSen.js";import{s as L}from"./capital_ships-BOrq68-Q.js";import{a as ue}from"./alliance_levels-B_mmXvbC.js";import{s as B}from"./spacebuildings-CVaBZ2bu.js";import"./Page-CtOkfGQ1.js";import"./byTypes-DiOuyN-I.js";const ve=d=>(ae("data-v-445dfe27"),d=d(),te(),d),fe={class:"container"},_e={class:"modal"},ge={class:"title"},Ie=ve(()=>n("div",null,null,-1)),he={class:"level-picker"},Le=q({__name:"CompendiumTech",setup(d){const M={RedStarScanner:B.RedStarScanner,ShipmentRelay:B.ShipmentRelay},S={Transport:L.Transport,Miner:L.Miner,Battleship:L.Battleship},{MaxModuleLevel:P}=pe,R=Object.fromEntries([...Object.entries(M).map(([e,a])=>[e,a.Cost.length]),...Object.entries(S).map(([e,a])=>[e,a.BuildCost.length]),...Object.keys(E).map(e=>[e,P]),["AllianceLevel",ue.XPRequired.length]]),A=Object.fromEntries([...Object.keys(M).map(e=>[e,0]),...Object.keys(S).map(e=>[e,0]),...Object.entries(E).map(([e,a])=>[e,le(a)]),["AllianceLevel",0]]),{data:s,levelMap:U,setTechLevel:j}=se(),{t:c}=F(),H=c("HS_COMPENDIUM"),m=O(!1),v=O(!1),t=C({size:D.SMALL,title:c("TECHNOLOGIES"),data:{value:{},maxLevel:0,minLevel:0,lastAgoUpdate:0,get key(){return this.value.Name}}}),T=C({size:D.LARGE,title:c("TECHNOLOGIES"),data:{data:_(()=>t.data.value),iconDir:_(()=>b(t.data.value)),tableOpts:_(ie)}}),w=setInterval(f,5e3);K(()=>{clearTimeout(w)});function V(e){s.value&&(t.data.value=e,t.data.maxLevel=R[e.Name],t.data.minLevel=A[e.Name],m.value=!0,f())}function G(e){var a;return!((a=p(e))!=null&&a.level)}function z(e){const a=x(t.data.key);return s.value[a]||(s.value[a]={level:0}),t.data.minLevel!=0&&e==t.data.minLevel&&s.value[a].level!=0&&(e=0),s.value[a].level!=e&&(s.value[a].level=e,j(a,e),f()),e}function p(e){var a;return((a=s.value)==null?void 0:a[x(e)])||null}function $(){var i;const e=t.data.value,a=b(e);if(e.Icon)return I(h,{name:e.Icon,dir:a});if(e.Model)return I(h,{name:e.Model[((i=p(e.Name))==null?void 0:i.level)-1||5],dir:a});if(e.PrefabModel)return I(h,{name:e.PrefabModel,dir:a})}function b(e){if(e.Icon)return e.specialIcon?"icons":"game/Modules";if(e.Model)return"game/Ships";if(e.PrefabModel)return"game/SpaceBuildings"}function f(){var e;if(m.value){const a=(e=p(t.data.key))==null?void 0:e.ts;a&&(t.data.lastAgoUpdate=(new Date().getTime()-a)/1e3)}}return(e,a)=>{const i=X("t");return Z(),J(re,null,{default:u(()=>[o(r(Q),null,{default:u(()=>[n("title",null,g(r(H)),1)]),_:1}),n("div",null,[n("div",fe,[o(de,{"on-click":V,"is-muted":G,"level-map":r(U)},null,8,["level-map"])]),o(N,y({open:m.value,"onUpdate:open":a[1]||(a[1]=l=>m.value=l)},t),{body:u(()=>{var l;return[n("div",_e,[n("div",ge,[n("div",null,[W("suppress TypeScriptUnresolvedReference "),n("h2",null,g(e.$t(t.data.value.TID)),1),n("p",null,g(r(c)("TID_SOCIAL_TIMESTAMP",[r(oe)(t.data.lastAgoUpdate)])),1),k(n("button",{class:"button accent",onClick:a[0]||(a[0]=Me=>v.value=!0)},null,512),[[i,"TID_MORE_INFO_BTN"]]),Ie]),o($)]),k(n("span",null,null,512),[[i,"CURRENT_LVL"]]),n("div",he,[o(ce,{value:((l=p(t.data.key))==null?void 0:l.level)||0,min:t.data.minLevel,max:t.data.maxLevel,"onUpdate:value":z},null,8,["value","min","max"])])])]}),_:1},16,["open"]),o(N,y({open:v.value,"onUpdate:open":a[2]||(a[2]=l=>v.value=l)},T),{body:u(()=>[o(me,Y(ee(T.data)),null,16)]),_:1},16,["open"])])]),_:1})}}}),Ae=ne(Le,[["__scopeId","data-v-445dfe27"],["__file","/home/runner/work/HadesSpace/HadesSpace/src/pages/CompendiumTech.vue"]]);export{Ae as default};
